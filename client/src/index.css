@tailwind base;
@tailwind components;
@tailwind utilities;

/*
 * THE FOLIO DESIGN SYSTEM
 * Luxury editorial shell + agent accent takeover
 */

/* ============================================
   LIGHT MODE — Shell Palette
   ============================================ */
:root {
  /* Core surfaces */
  --background: 50 20% 97%;
  --foreground: 0 0% 10%;
  --surface: 0 0% 100%;
  --surface-raised: 50 14% 95%;

  /* Text hierarchy */
  --muted-foreground: 0 0% 42%;
  --subtle-foreground: 0 0% 61%;

  /* Borders */
  --border: 50 10% 90%;
  --border-strong: 50 5% 81%;

  /* Interactive */
  --ring: 0 0% 10%;
  --input: 50 10% 90%;

  /* Semantic */
  --destructive: 0 84% 50%;
  --destructive-foreground: 0 0% 100%;
  --success: 142 72% 36%;
  --success-foreground: 0 0% 100%;

  /* Shadcn compatibility aliases */
  --card: 0 0% 100%;
  --card-foreground: 0 0% 10%;
  --card-border: 50 10% 90%;
  --popover: 0 0% 100%;
  --popover-foreground: 0 0% 10%;
  --popover-border: 50 10% 90%;
  --primary: 0 0% 10%;
  --primary-foreground: 50 20% 97%;
  --secondary: 50 14% 95%;
  --secondary-foreground: 0 0% 10%;
  --muted: 50 14% 95%;
  --accent: 50 10% 92%;
  --accent-foreground: 0 0% 10%;

  /* Sidebar */
  --sidebar: 50 14% 95%;
  --sidebar-foreground: 0 0% 10%;
  --sidebar-border: 50 10% 90%;
  --sidebar-primary: 0 0% 10%;
  --sidebar-primary-foreground: 50 20% 97%;
  --sidebar-accent: 50 10% 92%;
  --sidebar-accent-foreground: 0 0% 10%;
  --sidebar-ring: 0 0% 10%;

  /* Typography */
  --font-display: 'Playfair Display', serif;
  --font-sans: 'DM Sans', sans-serif;
  --font-mono: 'JetBrains Mono', monospace;

  /* Radius */
  --radius: 0.5rem;
  --radius-sm: 0.25rem;
  --radius-md: 0.5rem;
  --radius-lg: 0.75rem;
  --radius-xl: 1rem;

  /* Shadows — warm, subtle */
  --shadow-sm: 0 1px 2px rgba(0,0,0,0.04);
  --shadow-md: 0 2px 8px rgba(0,0,0,0.06), 0 1px 2px rgba(0,0,0,0.04);
  --shadow-lg: 0 4px 16px rgba(0,0,0,0.08), 0 2px 4px rgba(0,0,0,0.04);
  --shadow-xl: 0 8px 32px rgba(0,0,0,0.1), 0 2px 8px rgba(0,0,0,0.04);

  /* Elevation overlays */
  --elevate-1: rgba(0,0,0, 0.03);
  --elevate-2: rgba(0,0,0, 0.06);

  /* Charts */
  --chart-1: 0 0% 10%;
  --chart-2: 142 72% 36%;
  --chart-3: 50 5% 50%;
  --chart-4: 30 80% 55%;
  --chart-5: 0 84% 50%;

  /* Spacing base */
  --spacing: 0.25rem;
}

/* ============================================
   DARK MODE — Shell Palette
   ============================================ */
.dark {
  /* Core surfaces */
  --background: 60 4% 7%;
  --foreground: 50 6% 93%;
  --surface: 60 5% 10%;
  --surface-raised: 60 3% 8%;

  /* Text hierarchy */
  --muted-foreground: 50 3% 53%;
  --subtle-foreground: 50 3% 35%;

  /* Borders */
  --border: 50 5% 16%;
  --border-strong: 50 5% 23%;

  /* Interactive */
  --ring: 50 6% 93%;
  --input: 50 5% 16%;

  /* Semantic */
  --destructive: 0 84% 60%;
  --destructive-foreground: 0 0% 100%;
  --success: 142 71% 45%;
  --success-foreground: 0 0% 100%;

  /* Shadcn compatibility aliases */
  --card: 60 5% 10%;
  --card-foreground: 50 6% 93%;
  --card-border: 50 5% 16%;
  --popover: 60 5% 12%;
  --popover-foreground: 50 6% 93%;
  --popover-border: 50 5% 16%;
  --primary: 50 6% 93%;
  --primary-foreground: 60 4% 7%;
  --secondary: 60 5% 14%;
  --secondary-foreground: 50 6% 93%;
  --muted: 60 5% 14%;
  --accent: 60 5% 14%;
  --accent-foreground: 50 6% 93%;

  /* Sidebar */
  --sidebar: 60 3% 8%;
  --sidebar-foreground: 50 6% 93%;
  --sidebar-border: 50 5% 16%;
  --sidebar-primary: 50 6% 93%;
  --sidebar-primary-foreground: 60 4% 7%;
  --sidebar-accent: 60 5% 14%;
  --sidebar-accent-foreground: 50 6% 93%;
  --sidebar-ring: 50 6% 93%;

  /* Shadows — deeper, dramatic */
  --shadow-sm: 0 1px 2px rgba(0,0,0,0.2);
  --shadow-md: 0 2px 8px rgba(0,0,0,0.3), 0 1px 2px rgba(0,0,0,0.2);
  --shadow-lg: 0 4px 16px rgba(0,0,0,0.4), 0 2px 4px rgba(0,0,0,0.2);
  --shadow-xl: 0 8px 32px rgba(0,0,0,0.5), 0 2px 8px rgba(0,0,0,0.3);

  /* Elevation overlays */
  --elevate-1: rgba(255,255,255, 0.04);
  --elevate-2: rgba(255,255,255, 0.07);
}

/* ============================================
   AGENT ACCENT SYSTEM
   CSS custom properties set dynamically via
   data-agent-color attribute + inline styles
   ============================================ */

[data-agent-color] {
  /* These are overridden inline per-agent:
     --agent-accent
     --agent-accent-foreground
     --agent-accent-muted    (15% opacity)
     --agent-accent-subtle   (8% opacity)
  */
}

/* ============================================
   BASE LAYER
   ============================================ */
@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply font-sans antialiased bg-background text-foreground;
    font-feature-settings: "cv11", "ss01";
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* Editorial heading defaults */
  h1, h2, h3 {
    font-family: var(--font-display);
    letter-spacing: -0.02em;
  }

  /* Monospace contexts */
  code, pre, kbd, samp {
    font-family: var(--font-mono);
  }
}

/* ============================================
   COMPONENT UTILITIES
   ============================================ */
@layer utilities {
  /* Hide search cancel button in Chrome */
  input[type="search"]::-webkit-search-cancel-button {
    @apply hidden;
  }

  /* Contenteditable placeholder */
  [contenteditable][data-placeholder]:empty::before {
    content: attr(data-placeholder);
    color: hsl(var(--muted-foreground));
    pointer-events: none;
  }

  /* ---- Elevation system ---- */

  .no-default-hover-elevate {}
  .no-default-active-elevate {}

  /* Toggle backgrounds (behind content) */
  .toggle-elevate::before,
  .toggle-elevate-2::before {
    content: "";
    pointer-events: none;
    position: absolute;
    inset: 0px;
    border-radius: inherit;
    z-index: -1;
  }

  .toggle-elevate.toggle-elevated::before {
    background-color: var(--elevate-2);
  }

  .border.toggle-elevate::before {
    inset: -1px;
  }

  /* Hover/active overlays (in front of content) */
  .hover-elevate:not(.no-default-hover-elevate),
  .active-elevate:not(.no-default-active-elevate),
  .hover-elevate-2:not(.no-default-hover-elevate),
  .active-elevate-2:not(.no-default-active-elevate) {
    position: relative;
    z-index: 0;
  }

  .hover-elevate:not(.no-default-hover-elevate)::after,
  .active-elevate:not(.no-default-active-elevate)::after,
  .hover-elevate-2:not(.no-default-hover-elevate)::after,
  .active-elevate-2:not(.no-default-active-elevate)::after {
    content: "";
    pointer-events: none;
    position: absolute;
    inset: 0px;
    border-radius: inherit;
    z-index: 999;
  }

  .hover-elevate:hover:not(.no-default-hover-elevate)::after,
  .active-elevate:active:not(.no-default-active-elevate)::after {
    background-color: var(--elevate-1);
  }

  .hover-elevate-2:hover:not(.no-default-hover-elevate)::after,
  .active-elevate-2:active:not(.no-default-active-elevate)::after {
    background-color: var(--elevate-2);
  }

  .border.hover-elevate:not(.no-default-hover-elevate)::after,
  .border.active-elevate:not(.no-default-active-elevate)::after,
  .border.hover-elevate-2:not(.no-default-hover-elevate)::after,
  .border.active-elevate-2:not(.no-default-active-elevate)::after {
    inset: -1px;
  }

  /* ---- Folio-specific utilities ---- */

  /* Editorial uppercase labels */
  .label-uppercase {
    @apply text-sm font-medium uppercase;
    letter-spacing: 0.05em;
    color: hsl(var(--muted-foreground));
    font-family: var(--font-sans);
  }

  /* Display heading */
  .heading-display {
    font-family: var(--font-display);
    font-weight: 700;
    letter-spacing: -0.02em;
  }

  /* Card hover lift */
  .card-hover {
    @apply transition-all duration-200 ease-in-out;
  }
  .card-hover:hover {
    box-shadow: var(--shadow-lg);
    border-color: hsl(var(--border-strong));
    transform: translateY(-1px);
  }

  /* Agent accent masthead wash */
  .accent-wash {
    background-color: var(--agent-accent-subtle, transparent);
  }

  /* Agent accent rule */
  .accent-rule {
    border-bottom: 1px solid var(--agent-accent, transparent);
    opacity: 0.3;
  }

  /* Skeleton loading pulse */
  .skeleton-pulse {
    @apply animate-pulse;
    background: linear-gradient(
      90deg,
      hsl(var(--muted)) 0%,
      hsl(var(--border)) 50%,
      hsl(var(--muted)) 100%
    );
    background-size: 200% 100%;
    animation: skeleton-shimmer 1.5s ease-in-out infinite;
  }

  @keyframes skeleton-shimmer {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
  }
}

/* ============================================
   MOTION
   ============================================ */
@layer utilities {
  /* Page entrance */
  .page-enter {
    animation: page-fade-in 300ms ease-out;
  }

  @keyframes page-fade-in {
    from {
      opacity: 0;
      transform: translateY(8px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Dialog entrance */
  .dialog-enter {
    animation: dialog-scale-in 200ms cubic-bezier(0.16, 1, 0.3, 1);
  }

  @keyframes dialog-scale-in {
    from {
      opacity: 0;
      transform: scale(0.96);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  /* Button press */
  .press-scale:active {
    transform: scale(0.98);
    transition: transform 100ms ease-in;
  }

  /* Toast slide in */
  .toast-enter {
    animation: toast-slide-in 300ms cubic-bezier(0.16, 1, 0.3, 1);
  }

  @keyframes toast-slide-in {
    from {
      opacity: 0;
      transform: translateX(100%);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }
}
